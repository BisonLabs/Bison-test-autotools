const { ethers } = require("ethers");

//const provider = new ethers.JsonRpcProvider("http://private-testnet.blifeprotocol.com:12345")
const provider = new ethers.JsonRpcProvider("https://private-testnet.blifeprotocol.com:25600")
const privateKey = '0x90cb5be9e2c125d84af44f19a4e6e36af359bd47b41577aedbe8aa24313bbd40'
const num = 10
const value = BigInt(200e18)
const wallet = new ethers.Wallet(privateKey, provider)
const pk_list = [];   
const address_list = [];
const value_list = [];
const erc_value_list = [];
var erc20_address;

const airdrop_abi = [
	{
		"inputs": [
			{
				"internalType": "uint256[]",
				"name": "_arr",
				"type": "uint256[]"
			}
		],
		"name": "getSum",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "sum",
				"type": "uint256"
			}
		],
		"stateMutability": "pure",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_token",
				"type": "address"
			},
			{
				"internalType": "address payable[]",
				"name": "_addresses",
				"type": "address[]"
			},
			{
				"internalType": "uint256[]",
				"name": "_amounts",
				"type": "uint256[]"
			}
		],
		"name": "multiTransferERC20",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address payable[]",
				"name": "_addresses",
				"type": "address[]"
			},
			{
				"internalType": "uint256[]",
				"name": "_amounts",
				"type": "uint256[]"
			}
		],
		"name": "multiTransferETH",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	}
]

const airdrop_bytecode = "6080604052348015600e575f80fd5b50610c318061001c5f395ff3fe608060405260043610610033575f3560e01c806377988cf814610037578063ccb8c1e014610053578063daa8ce9a1461008f575b5f80fd5b610051600480360381019061004c919061055d565b6100ab565b005b34801561005e575f80fd5b50610079600480360381019061007491906105db565b61024d565b604051610086919061063e565b60405180910390f35b6100a960048036038101906100a491906106b1565b610299565b005b8181905084849050146100f3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100ea906107c2565b60405180910390fd5b5f6100fe838361024d565b9050803414610142576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101399061082a565b60405180910390fd5b5f5b85859050811015610245575f86868381811061016357610162610848565b5b905060200201602081019061017891906108b0565b73ffffffffffffffffffffffffffffffffffffffff168585848181106101a1576101a0610848565b5b905060200201356040516101b490610908565b5f6040518083038185875af1925050503d805f81146101ee576040519150601f19603f3d011682016040523d82523d5f602084013e6101f3565b606091505b5050905080610237576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161022e90610966565b60405180910390fd5b508080600101915050610144565b505050505050565b5f805f90505b838390508110156102925783838281811061027157610270610848565b5b905060200201358261028391906109b1565b91508080600101915050610253565b5092915050565b8181905084849050146102e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102d8906107c2565b60405180910390fd5b5f8590505f6102f0848461024d565b9050808273ffffffffffffffffffffffffffffffffffffffff1663dd62ed3e33306040518363ffffffff1660e01b815260040161032e9291906109f3565b602060405180830381865afa158015610349573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061036d9190610a44565b10156103ae576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103a590610ab9565b60405180910390fd5b5f5b868690508160ff161015610495578273ffffffffffffffffffffffffffffffffffffffff166323b872dd3389898560ff168181106103f1576103f0610848565b5b905060200201602081019061040691906108b0565b88888660ff1681811061041c5761041b610848565b5b905060200201356040518463ffffffff1660e01b815260040161044193929190610b32565b6020604051808303815f875af115801561045d573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104819190610b9c565b50808061048d90610bd3565b9150506103b0565b5050505050505050565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f8083601f8401126104c8576104c76104a7565b5b8235905067ffffffffffffffff8111156104e5576104e46104ab565b5b602083019150836020820283011115610501576105006104af565b5b9250929050565b5f8083601f84011261051d5761051c6104a7565b5b8235905067ffffffffffffffff81111561053a576105396104ab565b5b602083019150836020820283011115610556576105556104af565b5b9250929050565b5f805f80604085870312156105755761057461049f565b5b5f85013567ffffffffffffffff811115610592576105916104a3565b5b61059e878288016104b3565b9450945050602085013567ffffffffffffffff8111156105c1576105c06104a3565b5b6105cd87828801610508565b925092505092959194509250565b5f80602083850312156105f1576105f061049f565b5b5f83013567ffffffffffffffff81111561060e5761060d6104a3565b5b61061a85828601610508565b92509250509250929050565b5f819050919050565b61063881610626565b82525050565b5f6020820190506106515f83018461062f565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61068082610657565b9050919050565b61069081610676565b811461069a575f80fd5b50565b5f813590506106ab81610687565b92915050565b5f805f805f606086880312156106ca576106c961049f565b5b5f6106d78882890161069d565b955050602086013567ffffffffffffffff8111156106f8576106f76104a3565b5b610704888289016104b3565b9450945050604086013567ffffffffffffffff811115610727576107266104a3565b5b61073388828901610508565b92509250509295509295909350565b5f82825260208201905092915050565b7f4c656e67746873206f662041646472657373657320616e6420416d6f756e74735f8201527f204e4f5420455155414c00000000000000000000000000000000000000000000602082015250565b5f6107ac602a83610742565b91506107b782610752565b604082019050919050565b5f6020820190508181035f8301526107d9816107a0565b9050919050565b7f5472616e7366657220616d6f756e74206572726f7200000000000000000000005f82015250565b5f610814601583610742565b915061081f826107e0565b602082019050919050565b5f6020820190508181035f83015261084181610808565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b5f61087f82610657565b9050919050565b61088f81610875565b8114610899575f80fd5b50565b5f813590506108aa81610886565b92915050565b5f602082840312156108c5576108c461049f565b5b5f6108d28482850161089c565b91505092915050565b5f81905092915050565b50565b5f6108f35f836108db565b91506108fe826108e5565b5f82019050919050565b5f610912826108e8565b9150819050919050565b7f7472616e73666572206661696c000000000000000000000000000000000000005f82015250565b5f610950600d83610742565b915061095b8261091c565b602082019050919050565b5f6020820190508181035f83015261097d81610944565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6109bb82610626565b91506109c683610626565b92508282019050808211156109de576109dd610984565b5b92915050565b6109ed81610676565b82525050565b5f604082019050610a065f8301856109e4565b610a1360208301846109e4565b9392505050565b610a2381610626565b8114610a2d575f80fd5b50565b5f81519050610a3e81610a1a565b92915050565b5f60208284031215610a5957610a5861049f565b5b5f610a6684828501610a30565b91505092915050565b7f4e65656420417070726f766520455243323020746f6b656e00000000000000005f82015250565b5f610aa3601883610742565b9150610aae82610a6f565b602082019050919050565b5f6020820190508181035f830152610ad081610a97565b9050919050565b5f819050919050565b5f610afa610af5610af084610657565b610ad7565b610657565b9050919050565b5f610b0b82610ae0565b9050919050565b5f610b1c82610b01565b9050919050565b610b2c81610b12565b82525050565b5f606082019050610b455f8301866109e4565b610b526020830185610b23565b610b5f604083018461062f565b949350505050565b5f8115159050919050565b610b7b81610b67565b8114610b85575f80fd5b50565b5f81519050610b9681610b72565b92915050565b5f60208284031215610bb157610bb061049f565b5b5f610bbe84828501610b88565b91505092915050565b5f60ff82169050919050565b5f610bdd82610bc7565b915060ff8203610bf057610bef610984565b5b60018201905091905056fea26469706673582212203e7631969350e6a8676497d16e6ab113168058356ad7e07bb9addf8ff1a89d1264736f6c634300081a0033"

const erc20_abi = [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "burn",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "mint",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "recipient",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "sender",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "recipient",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	}
]

const erc20_bytecode = "6080604052601260055f6101000a81548160ff021916908360ff16021790555034801561002a575f80fd5b506040518060400160405280600581526020017f4269736f6e0000000000000000000000000000000000000000000000000000008152506003908161006f91906102f4565b506040518060400160405280600581526020017f4269736f6e000000000000000000000000000000000000000000000000000000815250600490816100b491906102f4565b506103c3565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061013557607f821691505b602082108103610148576101476100f1565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026101aa7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261016f565b6101b4868361016f565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f6101f86101f36101ee846101cc565b6101d5565b6101cc565b9050919050565b5f819050919050565b610211836101de565b61022561021d826101ff565b84845461017b565b825550505050565b5f90565b61023961022d565b610244818484610208565b505050565b5b818110156102675761025c5f82610231565b60018101905061024a565b5050565b601f8211156102ac5761027d8161014e565b61028684610160565b81016020851015610295578190505b6102a96102a185610160565b830182610249565b50505b505050565b5f82821c905092915050565b5f6102cc5f19846008026102b1565b1980831691505092915050565b5f6102e483836102bd565b9150826002028217905092915050565b6102fd826100ba565b67ffffffffffffffff811115610316576103156100c4565b5b610320825461011e565b61032b82828561026b565b5f60209050601f83116001811461035c575f841561034a578287015190505b61035485826102d9565b8655506103bb565b601f19841661036a8661014e565b5f5b828110156103915784890151825560018201915060208501945060208101905061036c565b868310156103ae57848901516103aa601f8916826102bd565b8355505b6001600288020188555050505b505050505050565b610cef806103d05f395ff3fe608060405234801561000f575f80fd5b50600436106100a7575f3560e01c806342966c681161006f57806342966c681461016557806370a082311461018157806395d89b41146101b1578063a0712d68146101cf578063a9059cbb146101eb578063dd62ed3e1461021b576100a7565b806306fdde03146100ab578063095ea7b3146100c957806318160ddd146100f957806323b872dd14610117578063313ce56714610147575b5f80fd5b6100b361024b565b6040516100c09190610967565b60405180910390f35b6100e360048036038101906100de9190610a18565b6102d7565b6040516100f09190610a70565b60405180910390f35b6101016103c4565b60405161010e9190610a98565b60405180910390f35b610131600480360381019061012c9190610ab1565b6103ca565b60405161013e9190610a70565b60405180910390f35b61014f61056d565b60405161015c9190610b1c565b60405180910390f35b61017f600480360381019061017a9190610b35565b61057f565b005b61019b60048036038101906101969190610b60565b610651565b6040516101a89190610a98565b60405180910390f35b6101b9610665565b6040516101c69190610967565b60405180910390f35b6101e960048036038101906101e49190610b35565b6106f1565b005b61020560048036038101906102009190610a18565b6107c3565b6040516102129190610a70565b60405180910390f35b61023560048036038101906102309190610b8b565b6108d7565b6040516102429190610a98565b60405180910390f35b6003805461025890610bf6565b80601f016020809104026020016040519081016040528092919081815260200182805461028490610bf6565b80156102cf5780601f106102a6576101008083540402835291602001916102cf565b820191905f5260205f20905b8154815290600101906020018083116102b257829003601f168201915b505050505081565b5f8160015f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516103b29190610a98565b60405180910390a36001905092915050565b60025481565b5f8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546104529190610c53565b92505081905550815f808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546104a49190610c53565b92505081905550815f808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546104f69190610c86565b925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8460405161055a9190610a98565b60405180910390a3600190509392505050565b60055f9054906101000a900460ff1681565b805f803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546105ca9190610c53565b925050819055508060025f8282546105e29190610c53565b925050819055505f73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516106469190610a98565b60405180910390a350565b5f602052805f5260405f205f915090505481565b6004805461067290610bf6565b80601f016020809104026020016040519081016040528092919081815260200182805461069e90610bf6565b80156106e95780601f106106c0576101008083540402835291602001916106e9565b820191905f5260205f20905b8154815290600101906020018083116106cc57829003601f168201915b505050505081565b805f803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825461073c9190610c86565b925050819055508060025f8282546107549190610c86565b925050819055503373ffffffffffffffffffffffffffffffffffffffff165f73ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516107b89190610a98565b60405180910390a350565b5f815f803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825461080f9190610c53565b92505081905550815f808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8282546108619190610c86565b925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040516108c59190610a98565b60405180910390a36001905092915050565b6001602052815f5260405f20602052805f5260405f205f91509150505481565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610939826108f7565b6109438185610901565b9350610953818560208601610911565b61095c8161091f565b840191505092915050565b5f6020820190508181035f83015261097f818461092f565b905092915050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6109b48261098b565b9050919050565b6109c4816109aa565b81146109ce575f80fd5b50565b5f813590506109df816109bb565b92915050565b5f819050919050565b6109f7816109e5565b8114610a01575f80fd5b50565b5f81359050610a12816109ee565b92915050565b5f8060408385031215610a2e57610a2d610987565b5b5f610a3b858286016109d1565b9250506020610a4c85828601610a04565b9150509250929050565b5f8115159050919050565b610a6a81610a56565b82525050565b5f602082019050610a835f830184610a61565b92915050565b610a92816109e5565b82525050565b5f602082019050610aab5f830184610a89565b92915050565b5f805f60608486031215610ac857610ac7610987565b5b5f610ad5868287016109d1565b9350506020610ae6868287016109d1565b9250506040610af786828701610a04565b9150509250925092565b5f60ff82169050919050565b610b1681610b01565b82525050565b5f602082019050610b2f5f830184610b0d565b92915050565b5f60208284031215610b4a57610b49610987565b5b5f610b5784828501610a04565b91505092915050565b5f60208284031215610b7557610b74610987565b5b5f610b82848285016109d1565b91505092915050565b5f8060408385031215610ba157610ba0610987565b5b5f610bae858286016109d1565b9250506020610bbf858286016109d1565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610c0d57607f821691505b602082108103610c2057610c1f610bc9565b5b50919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610c5d826109e5565b9150610c68836109e5565b9250828203905081811115610c8057610c7f610c26565b5b92915050565b5f610c90826109e5565b9150610c9b836109e5565b9250828201905080821115610cb357610cb2610c26565b5b9291505056fea2646970667358221220c6bbc77f0d1b10bfe3d92963d83257594b43b1f1b54093f16e25c99f88f400bd64736f6c634300081a0033"
const main = async () => {
    console.log("1 Deploying ERC20 Contract");
    // Deploy the ERC20 contract
    const erc20_factory = new ethers.ContractFactory(erc20_abi, erc20_bytecode, wallet);
    const erc20_contract = await erc20_factory.deploy({gasLimit: 21000000});
    erc20_address = erc20_contract.target;
    console.log(`ERC20 Contract Address: ${erc20_address}`);
    await erc20_contract.waitForDeployment();
    console.log("ERC20 Contract Deployed");

    console.log("2 Deploying Airdrop Contract");
    // Deploy the Airdrop contract
    const airdrop_factory = new ethers.ContractFactory(airdrop_abi, airdrop_bytecode, wallet);
    const airdrop_contract = await airdrop_factory.deploy({gasLimit: 21000000});
    const airdrop_address = airdrop_contract.target;
    console.log(`Airdrop Contract Address: ${airdrop_address}`);
    await airdrop_contract.waitForDeployment();
    console.log("Airdrop Contract Deployed");

    console.log("3 Interacting with ERC20 Contract: Minting Funds");
    // Mint funds in the ERC20 contract
    const mint_tx = await erc20_contract.mint(value);
    await mint_tx.wait();
    console.log(`Transaction Details:`);
    console.log(mint_tx);

    console.log("4 Interacting with ERC20 Contract: Approving Airdrop Contract for Funds");
    // Approve the Airdrop contract to spend funds
    const approve_tx = await erc20_contract.approve(airdrop_address, value);
    await approve_tx.wait();
    console.log(`Transaction Details:`);
    console.log(approve_tx);

    console.log(`5 Creating ${num} Random Wallets`);

    if (num > 500) {
        let i = 0;
        const address_list1 = [];
        const address_list2 = [];
        let value1 = BigInt(0);
        let value2 = BigInt(0);
        const value_list1 = [];
        const value_list2 = [];
        const erc_value_list1 = [];
        const erc_value_list2 = [];
        while (i < num) {
            const wallet = ethers.Wallet.createRandom();
            const address = await wallet.getAddress();
            if (i % 2 === 0) {
                address_list1.push(address);
                value_list1.push(BigInt(1e18));
                erc_value_list1.push(BigInt(10000));
                value1 += BigInt(1e18);
            } else {
                address_list2.push(address);
                value_list2.push(BigInt(1e18));
                value2 += BigInt(1e18);
                erc_value_list2.push(BigInt(10000));
            }
            const pk = wallet.privateKey;
            pk_list.push(pk);
            i++;
        }
        console.log("\n6 Interacting with Contracts");
        // Perform multiple ETH transfers
        const tx1 = await airdrop_contract.multiTransferETH(address_list1, value_list1, {value: value1});
        console.log(`Transaction Details:`);
        await tx1.wait();
        console.log(tx1);

        const tx2 = await airdrop_contract.multiTransferETH(address_list2, value_list2, {value: value2});
        console.log(`Transaction Details:`);
        await tx2.wait();
        console.log(tx2);

        // Perform multiple ERC20 transfers
        const tx3 = await airdrop_contract.multiTransferERC20(erc20_address, address_list1, erc_value_list1);
        console.log(`Transaction Details:`);
        await tx3.wait();
        console.log(tx3);

        const tx4 = await airdrop_contract.multiTransferERC20(erc20_address, address_list2, erc_value_list2);
        console.log(`Transaction Details:`);
        await tx4.wait();
        console.log(tx4);

    } else {
        let i = 0;
        while (i < num) {
            const wallet = ethers.Wallet.createRandom();
            const address = await wallet.getAddress();
            address_list.push(address);
            const pk = wallet.privateKey;
            pk_list.push(pk);
            value_list.push(BigInt(1e18));
            erc_value_list.push(BigInt(100));
            i++;
        }
        console.log("\n6 Interacting with Airdrop Contract");
        // Perform a single batch of ETH transfers
        const tx = await airdrop_contract.multiTransferETH(address_list, value_list, {value: value});
        console.log(`Transaction Details:`);
        await tx.wait();
        console.log(tx);
        // Perform a single batch of ERC20 transfers
        const erc_tx = await airdrop_contract.multiTransferERC20(erc20_address, address_list, erc_value_list);
        console.log(`Transaction Details:`);
        await erc_tx.wait();
        console.log(erc_tx);
    }

    multi_transfer();
}

main();

function multi_transfer() {
    for (let i in pk_list) {
        t1(pk_list[i]);
    }
}

const t1 = async (pk) => {
    let i = 0;
    while (i < 100) {
        const wallet1 = new ethers.Wallet(pk, provider);
        const address1 = wallet1.address;
        console.log(`\nFROM Address: ${address1}`);
        const wallet2 = ethers.Wallet.createRandom();
        const address2 = wallet2.address;
        console.log(`TO Address: ${address2}`);

        const erc20_ct = new ethers.Contract(erc20_address, erc20_abi, wallet1);
        const balance1 = await erc20_ct.balanceOf(address1);
        console.log(`\tBefore Transfer Balance: ${balance1}`);

        // Transfer 1 token
        const transfer_tx = await erc20_ct.transfer(address2, 1);
        console.log(`\nWaiting for Transfer (may take a few minutes)`);
        await transfer_tx.wait();
        console.log(`\nTransfer Successful!`);

        const balance = await erc20_ct.balanceOf(address1);
        console.log(`\tAfter Transfer Balance: ${balance}`);
    }
}
